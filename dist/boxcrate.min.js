var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
var BoxCrate=function(a){a=void 0===a?{}:a;this._options=Object.assign({expiredCheckType:null,expiredCheckInterval:1E3},a);this.id=null;this.time=this.prev=0;this.expiredCheckType=this._options.expiredCheckType;this.expiredCheckInterval=null;this.storage=window.localStorage;this._count=0;this._boot()};
BoxCrate.prototype.setItem=function(a,b,d){var c={type:null,timestamp:null,expires:null,data:null};switch(typeof b){case "string":case "number":case "boolean":c.type=typeof b;c.data=b.toString();break;case "undefined":c.type="undefined";c.data=void 0;break;case "object":if(Array.isArray(b)){var f=[];b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;e=b.next())e=e.value,"object"===typeof e&&null!==e&&(e=JSON.stringify(e)),f.push(e);c.type="array";c.data=f.join("|")}else null===b?(c.type="null",
c.data="null"):null!==b.size&&void 0!==b.size&&0<b.size?(c.type="set",c.data=[].concat($jscomp.arrayFromIterable(b)).join()):(c.type="object",c.data=JSON.stringify(b))}c.timestamp=window.performance.now();c.expires=d;this.storage.setItem(a,JSON.stringify(c));this._count++;return this};BoxCrate.prototype.getItem=function(a){if(0!=this.storage.length){var b=JSON.parse(this.storage.getItem(a));if("onGet"!=this.expiredCheckType||!this._removeExpired(a,b))return this._parse(b.data,b.type)}};
BoxCrate.prototype.removeItem=function(a){this.storage.removeItem(a);this._count--};BoxCrate.prototype.clear=function(){this.storage.clear();this._count=0};
BoxCrate.prototype._boot=function(){var a=this;if(this.expiredCheckType){switch(this.expiredCheckType){case "passive":this.expiredCheckInterval=6E4;break;case "active":this.expiredCheckInterval=1E3;break;case "custom":this.expiredCheckInterval=this._options.expiredCheckInterval}this.expiredCheckType&&"onGet"!==this.expiredCheckType&&(this.id=window.setTimeout(function(){a._checkExpiredInterval()},this.expiredCheckInterval))}};
BoxCrate.prototype._parse=function(a,b){switch(b){case "string":return String(a);case "number":return Number(a);case "boolean":return!!a;case "null":return null;case "array":b=[];a=a.split("|");a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())b.push(this._convert(d.value));return b;case "object":return JSON.parse(a)}};BoxCrate.prototype._convert=function(a){if("true"===a||"false"===a)return!!a;if("undefined"!==a){if("null"===a)return null;if(Number(a))return Number(a);try{return JSON.parse(a)}catch(b){return a}}};
BoxCrate.prototype._checkExpiredInterval=function(){var a=this;this.time=window.performance.now();if(this.time-this.prev>=this.expiredCheckInterval){for(var b in this.storage)if(this.storage.hasOwnProperty(b)){var d=JSON.parse(this.storage[b]);this._removeExpired(b,d)}this.prev=this.time}this.id=window.setTimeout(function(){a._checkExpiredInterval()},this.expiredCheckInterval)};
BoxCrate.prototype._removeExpired=function(a,b){return null!==b.expires&&window.performance.now()-b.timestamp>=b.expires?(this.storage.removeItem(a),this._count--,!0):!1};$jscomp.global.Object.defineProperties(BoxCrate.prototype,{count:{configurable:!0,enumerable:!0,get:function(){return this._count}}});
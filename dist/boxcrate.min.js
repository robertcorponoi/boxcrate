var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
var BoxCrate=function(a){a=void 0===a?{}:a;this._options=Object.assign({expiredCheckType:null,expiredCheckInterval:1E3},a);this.id=null;this.time=this.prev=0;this.expiredCheckType=this._options.expiredCheckType;this.expiredCheckInterval=null;this.storage=window.localStorage;this.length=0;this._boot()};
BoxCrate.prototype._boot=function(){var a=this;if(this.expiredCheckType){switch(this.expiredCheckType){case "passive":this.expiredCheckInterval=6E4;break;case "active":this.expiredCheckInterval=1E3;break;case "custom":this.expiredCheckInterval=this._options.expiredCheckInterval}this.expiredCheckType&&"onGet"!==this.expiredCheckType&&(this.id=window.setTimeout(function(){a._checkExpiredInterval()},this.expiredCheckInterval))}};
BoxCrate.prototype.setItem=function(a,b,d){var c={type:null,timestamp:null,expires:null,data:null};switch(typeof b){case "string":case "number":case "boolean":c.type=typeof b;c.data=b.toString();break;case "undefined":c.type="undefined";c.data=void 0;break;case "object":if(Array.isArray(b)){var f=[];b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;e=b.next())e=e.value,"object"===typeof e&&null!==e&&(e=JSON.stringify(e)),f.push(e);c.type="array";c.data=f.join("|")}else null===b?(c.type="null",
c.data="null"):null!==b.size&&void 0!==b.size&&0<b.size?(c.type="set",c.data=[].concat($jscomp.arrayFromIterable(b)).join()):(c.type="object",c.data=JSON.stringify(b))}c.timestamp=window.performance.now();c.expires=d;this.storage.setItem(a,JSON.stringify(c));this.length++;return this};BoxCrate.prototype.getItem=function(a){if(0!==this.storage.length){var b=this.storage.getItem(a);b=JSON.parse(b);if("onGet"!==this.expiredCheckType||!this._removeExpired(a,b))return this._parse(b.data,b.type)}};
BoxCrate.prototype.removeItem=function(a){this.storage.removeItem(a);this.length--};BoxCrate.prototype.clear=function(){this.storage.clear();this.length=0};BoxCrate.prototype._parse=function(a,b){switch(b){case "string":return String(a);case "number":return Number(a);case "boolean":return!!a;case "null":return null;case "array":var d=[],c=a.split("|");c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())d.push(this._convert(f.value));return d;case "object":return JSON.parse(a)}};
BoxCrate.prototype._convert=function(a){if("true"===a||"false"===a)return!!a;if("undefined"!==a){if("null"===a)return null;if(Number(a))return Number(a);try{return JSON.parse(a)}catch(b){return a}}};
BoxCrate.prototype._checkExpiredInterval=function(){var a=this;this.time=window.performance.now();if(this.time-this.prev>=this.expiredCheckInterval){for(var b in this.storage)if(this.storage.hasOwnProperty(b)){var d=JSON.parse(this.storage[b]);this._removeExpired(b,d)}this.prev=this.time}this.id=window.setTimeout(function(){a._checkExpiredInterval()},this.expiredCheckInterval)};
BoxCrate.prototype._removeExpired=function(a,b){return null!==b.expires&&window.performance.now()-b.timestamp>=b.expires?(this.storage.removeItem(a),this.length--,!0):!1};